<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="Chan&#39;s Blog">
<meta property="og:url" content="http://mrhu.vip/page/4/index.html">
<meta property="og:site_name" content="Chan&#39;s Blog">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chan&#39;s Blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://mrhu.vip/page/4/"/>





  <title>Chan's Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Chan's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">CallMe胡先生</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mrhu.vip/2019/01/03/c-671-Second-Minimum-Node-in-a-Binary-Tree/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cheng Hu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chan's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/03/c-671-Second-Minimum-Node-in-a-Binary-Tree/" itemprop="url">c_671_Second_Minimum_Node_in_a_Binary_Tree</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-03T10:18:16+08:00">
                2019-01-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="/2019/01/03/c-671-Second-Minimum-Node-in-a-Binary-Tree/question.png" alt=""></p>
<p>//<br>// Created by Mr.Hu on 2019/1/3.<br>//<br>// leetcode 671 second minimum node in a binary tree<br>//<br>// 题目给定一棵二叉树，该树满足以下特点：每个节点要么没有子节点，要么有两个子节点；父节点的值小于等于子节点的值；<br>// 要求找出这棵树中第二小的值，如果不存在，则返回-1<br>//<br>// 刚开始思考这个题目想的很简单，只需呀判断根节点，根节点左儿子，根节点右儿子即可。然后报错了…<br>// 因为我没有考虑到，当其中一个子节点a等于根节点时，另一个子节点b大于根节点时，此时第二小的值可能出现在以a为根节点的子树上。<br>// 太斯拜了!<br>//<br>// 重新换一种想法，这个题目从根本上出发，还是要遍历整棵树，找出第二小的值；但是有一个值我们是知道的：最小的值，即根节点的值；<br>// 所以我们可以用两个全局变量，一个保存根节点的值，一个保存第二小的值（初始化为INT_MAX）；<br>// 然后使用dfs对整棵树进行遍历，如果当前访问的节点值小于second，并且不等于root_val，则说明可能是第二小的值；<br>// 继续遍历…直到遍历结束。最后判断second的值是否为初始值，如果不是，则return second，否则return -1；<br>//</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TreeNode</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> val;</span><br><span class="line">    TreeNode *left;</span><br><span class="line">    TreeNode *right;</span><br><span class="line">    TreeNode(<span class="keyword">int</span> x) : val(x), left(<span class="literal">NULL</span>), right(<span class="literal">NULL</span>) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="keyword">int</span> root_val, result;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">findSecondMinimumValue</span><span class="params">(TreeNode *root)</span> </span>&#123;</span><br><span class="line">        root_val = root-&gt;val;</span><br><span class="line">        result = INT_MAX;</span><br><span class="line">        dfs(root);</span><br><span class="line">        <span class="keyword">return</span> result != INT_MAX ? result : <span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(TreeNode *node)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node-&gt;val &lt; result &amp;&amp; node-&gt;val != root_val) &#123;</span><br><span class="line">            result = node-&gt;val;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (node-&gt;left) dfs(node-&gt;left);</span><br><span class="line">        <span class="keyword">if</span> (node-&gt;right) dfs(node-&gt;right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">TreeNode <span class="title">a</span><span class="params">(<span class="number">2</span>)</span></span>;</span><br><span class="line">    <span class="function">TreeNode <span class="title">b</span><span class="params">(<span class="number">2</span>)</span></span>;</span><br><span class="line">    <span class="function">TreeNode <span class="title">c</span><span class="params">(<span class="number">5</span>)</span></span>;</span><br><span class="line">    <span class="function">TreeNode <span class="title">d</span><span class="params">(<span class="number">5</span>)</span></span>;</span><br><span class="line">    <span class="function">TreeNode <span class="title">e</span><span class="params">(<span class="number">7</span>)</span></span>;</span><br><span class="line">    a.left = &amp;b;</span><br><span class="line">    a.right = &amp;c;</span><br><span class="line">    c.left = &amp;d;</span><br><span class="line">    c.right = &amp;e;</span><br><span class="line">    Solution solution;</span><br><span class="line">    <span class="keyword">int</span> second_minimum = solution.findSecondMinimumValue(&amp;a);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; second_minimum;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mrhu.vip/2019/01/02/c-669-Trim-a-Binary-Search-Tree/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cheng Hu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chan's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/02/c-669-Trim-a-Binary-Search-Tree/" itemprop="url">c_669_Trim_a_Binary_Search_Tree</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-02T15:19:34+08:00">
                2019-01-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="/2019/01/02/c-669-Trim-a-Binary-Search-Tree/question.png" alt=""></p>
<p>//<br>// Created by Mr.Hu on 2019/1/2.<br>//<br>// leetcode 669 trim a binary search tree<br>//<br>// 题目给定一棵二叉搜索树，以及限定上界和下界[L,R]，要求对二叉树进行剪枝操作，即对于没有在要求范围内的节点进行丢弃。<br>// 最后返回修剪后的二叉排序树。<br>//<br>// 这个题目刚开始思考的时候没有什么思路，但是对于树的题目，还是努力想找到一种递归的方式进行解答，便寻找是否存在相同的处理结构。<br>//<br>// 假设对于某个节点，存在三种情况：<br>// 1、如果节点为nullptr，则返回nullptr；<br>// 2、如果节点值在[L,R]范围内，则需要继续考虑其左子节点、右节点是否在范围内，而这个过程和当前过程一样<br>// （因为我们前面针对的任意一个节点进行考虑；）<br>// 3、如果节点值不在[L,R]范围内，则同样需要考虑其左子节点、右子节点是否在范围内，但是这里有一个隐藏情况需要分析清楚，而且易错：<br>// 如果当前节点不在[L,R]范围内，根据二叉搜索树的定义，左子树上所有节点值小于父节点，右子树上所有节点值大于父节点。则当前节点的左儿子、<br>// 右儿子至多存在一个节点在[L,R]范围内，注意是至多。<br>//<br>// 分析完上述三种情况，我们需要开始考虑整个算法设计。<br>// 第一种情况很简单，直接返回nullptr即可；<br>// 第二种情况，当前节点已经满足情况，需要考虑其子节点的情况，则需要分别对左右节点进行判断，且判断返回的结果应该直接反映到其左右节点上，<br>// 所以利用 root-&gt;left = trimBST(root-&gt;left, L, R); 的方式，对子节点进行判断，如果在范围内，则子节点不变，如果不在，则进行剪枝，<br>// 返回其他满足条件的节点。<br>// 第三种情况，此时当前节点已经被剪去，需要考虑左子节点还是右子节点会替代当前节点的位置，或者是其他更底层的后代，因此此时需要判断，<br>// 且判断的结果不再是对节点的左右子节点进行更新，而是独立门户，充当当前子树的根节点，然后在递归中反馈给某一级祖先节点。<br>//<br>// ⚠️：第三步的操作是这个题目的关键，而且这个题目使用递归的方式写起来很简单，但是想要思考清楚还是有点难度，虽然这个题目是easy level…<br>//</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TreeNode</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> val;</span><br><span class="line">    TreeNode *left;</span><br><span class="line">    TreeNode *right;</span><br><span class="line">    TreeNode(<span class="keyword">int</span> x) : val(x), left(<span class="literal">nullptr</span>), right(<span class="literal">nullptr</span>) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">TreeNode *<span class="title">trimBST</span><span class="params">(TreeNode *root, <span class="keyword">int</span> L, <span class="keyword">int</span> R)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!root) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (root-&gt;val &gt;= L &amp;&amp; root-&gt;val &lt;= R) &#123;</span><br><span class="line">            root-&gt;left = trimBST(root-&gt;left, L, R);</span><br><span class="line">            root-&gt;right = trimBST(root-&gt;right, L, R);</span><br><span class="line">            <span class="keyword">return</span> root;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            TreeNode *root_a = trimBST(root-&gt;left, L, R);</span><br><span class="line">            TreeNode *root_b = trimBST(root-&gt;right, L, R);</span><br><span class="line">            <span class="keyword">if</span> (root_a) <span class="keyword">return</span> root_a;</span><br><span class="line">            <span class="keyword">if</span> (root_b) <span class="keyword">return</span> root_b;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">nullptr</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">TreeNode <span class="title">a</span><span class="params">(<span class="number">1</span>)</span></span>;</span><br><span class="line">    <span class="function">TreeNode <span class="title">b</span><span class="params">(<span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="function">TreeNode <span class="title">c</span><span class="params">(<span class="number">2</span>)</span></span>;</span><br><span class="line">    a.left = &amp;b;</span><br><span class="line">    a.right = &amp;c;</span><br><span class="line">    Solution solution;</span><br><span class="line">    <span class="keyword">int</span> L = <span class="number">0</span>, R = <span class="number">2</span>;</span><br><span class="line">    TreeNode *root = solution.trimBST(&amp;a, L, R);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mrhu.vip/2019/01/02/c-653-Two-Sum-IV-Input-is-a-BST/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cheng Hu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chan's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/02/c-653-Two-Sum-IV-Input-is-a-BST/" itemprop="url">c_653_Two_Sum_IV_Input_is_a_BST</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-02T13:30:13+08:00">
                2019-01-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="/2019/01/02/c-653-Two-Sum-IV-Input-is-a-BST/question.png" alt=""></p>
<p>//<br>// Created by Mr.Hu on 2019/1/2.<br>//<br>// leetcode 653 two sum IV input is a BST<br>//<br>// 题目要求对于给定的二叉搜索树，判断树中是否存在两个节点值，其和等于给定的目标值<br>//<br>// 题目给定的是一棵二叉搜索树，完全可以使用中序遍历的方式，将树转换为排序好的数组，得到排序数组后，考虑数组中任意两个值是否等于目标值。<br>//<br>// 注：在对排序数组进行判断是否存在两个值等于目标值时，还可以进行优化<br>//</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TreeNode</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> val;</span><br><span class="line">    TreeNode *left;</span><br><span class="line">    TreeNode *right;</span><br><span class="line">    TreeNode(<span class="keyword">int</span> x) : val(x), left(<span class="literal">NULL</span>), right(<span class="literal">NULL</span>) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">findTarget</span><span class="params">(TreeNode *root, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; sorted_list;</span><br><span class="line">        middle_order(root, sorted_list);</span><br><span class="line">        <span class="comment">// sorted_list为从小到大排序</span></span><br><span class="line">        <span class="keyword">int</span> size = sorted_list.size();</span><br><span class="line">        <span class="keyword">if</span> (size &lt; <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; size; j++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (sorted_list[i] + sorted_list[j] == k) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">middle_order</span><span class="params">(TreeNode *node, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; &amp;<span class="built_in">list</span>)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!node-&gt;left &amp;&amp; !node-&gt;right) &#123;</span><br><span class="line">            <span class="built_in">list</span>.push_back(node-&gt;val);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (node-&gt;left) middle_order(node-&gt;left, <span class="built_in">list</span>);</span><br><span class="line">        <span class="built_in">list</span>.push_back(node-&gt;val);</span><br><span class="line">        <span class="keyword">if</span> (node-&gt;right) middle_order(node-&gt;right, <span class="built_in">list</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">TreeNode <span class="title">a</span><span class="params">(<span class="number">5</span>)</span></span>;</span><br><span class="line">    <span class="function">TreeNode <span class="title">b</span><span class="params">(<span class="number">3</span>)</span></span>;</span><br><span class="line">    <span class="function">TreeNode <span class="title">c</span><span class="params">(<span class="number">6</span>)</span></span>;</span><br><span class="line">    <span class="function">TreeNode <span class="title">d</span><span class="params">(<span class="number">2</span>)</span></span>;</span><br><span class="line">    <span class="function">TreeNode <span class="title">e</span><span class="params">(<span class="number">4</span>)</span></span>;</span><br><span class="line">    <span class="function">TreeNode <span class="title">f</span><span class="params">(<span class="number">7</span>)</span></span>;</span><br><span class="line">    a.left = &amp;b;</span><br><span class="line">    a.right = &amp;c;</span><br><span class="line">    b.left = &amp;d;</span><br><span class="line">    b.right = &amp;e;</span><br><span class="line">    c.right = &amp;f;</span><br><span class="line">    Solution solution;</span><br><span class="line">    <span class="keyword">bool</span> exist = solution.findTarget(&amp;a, <span class="number">7</span>);</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; exist;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mrhu.vip/2019/01/02/c-637-Average-of-Levels-in-Binary-Tree/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cheng Hu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chan's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/02/c-637-Average-of-Levels-in-Binary-Tree/" itemprop="url">c_637_Average_of_Levels_in_Binary_Tree</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-01-02T12:53:30+08:00">
                2019-01-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Algorithm/" itemprop="url" rel="index">
                    <span itemprop="name">Algorithm</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="/2019/01/02/c-637-Average-of-Levels-in-Binary-Tree/question.png" alt=""></p>
<p>//<br>// Created by Mr.Hu on 2019/1/2.<br>//<br>// leetcode 637 average of levels in binary tree<br>//<br>// 题目要去对于给定的二叉树，计算每一层的平均值。<br>//<br>// 这题属于BFS（广度优先搜索）的拓展，我们需要遍历每一层，得到每层节点值的和。<br>// 可以使用BFS的循环方式，利用queue来保存待访问节点，然后使用两个int变量分别保存当前节点的剩余数量和下一层的节点数。<br>//<br>// 我这里使用两个vector来交替保存当前节点和下一层节点，直到最后两个vector都为空，则表示二叉树的每一层的平均值都计算完毕。<br>//</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">TreeNode</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> val;</span><br><span class="line">    TreeNode *left;</span><br><span class="line">    TreeNode *right;</span><br><span class="line">    TreeNode(<span class="keyword">int</span> x) : val(x), left(<span class="literal">NULL</span>), right(<span class="literal">NULL</span>) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; averageOfLevels(TreeNode *root) &#123;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; result;</span><br><span class="line">        <span class="keyword">if</span> (!root) &#123;</span><br><span class="line">            <span class="keyword">return</span> result;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">vector</span>&lt;TreeNode *&gt; v1, v2;</span><br><span class="line">        v1.push_back(root);</span><br><span class="line">        <span class="keyword">double</span> sum_level;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">            sum_level = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span> (v1.empty() &amp;&amp; v2.empty()) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!v1.empty()) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">auto</span> node:v1) &#123;</span><br><span class="line">                    sum_level += node-&gt;val;</span><br><span class="line">                    <span class="keyword">if</span> (node-&gt;left) v2.push_back(node-&gt;left);</span><br><span class="line">                    <span class="keyword">if</span> (node-&gt;right) v2.push_back(node-&gt;right);</span><br><span class="line">                &#125;</span><br><span class="line">                result.push_back(sum_level / v1.size());</span><br><span class="line">                v1.clear();</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (!v2.empty()) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">auto</span> node:v2) &#123;</span><br><span class="line">                    sum_level += node-&gt;val;</span><br><span class="line">                    <span class="keyword">if</span> (node-&gt;left) v1.push_back(node-&gt;left);</span><br><span class="line">                    <span class="keyword">if</span> (node-&gt;right) v1.push_back(node-&gt;right);</span><br><span class="line">                &#125;</span><br><span class="line">                result.push_back(sum_level / v2.size());</span><br><span class="line">                v2.clear();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="function">TreeNode <span class="title">a</span><span class="params">(<span class="number">3</span>)</span></span>;</span><br><span class="line">    <span class="function">TreeNode <span class="title">b</span><span class="params">(<span class="number">4</span>)</span></span>;</span><br><span class="line">    <span class="function">TreeNode <span class="title">c</span><span class="params">(<span class="number">9</span>)</span></span>;</span><br><span class="line">    <span class="function">TreeNode <span class="title">d</span><span class="params">(<span class="number">4</span>)</span></span>;</span><br><span class="line">    <span class="function">TreeNode <span class="title">e</span><span class="params">(<span class="number">8</span>)</span></span>;</span><br><span class="line">    a.left = &amp;b;</span><br><span class="line">    a.right = &amp;c;</span><br><span class="line">    c.left = &amp;d;</span><br><span class="line">    c.right = &amp;e;</span><br><span class="line">    Solution solution;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; result = solution.averageOfLevels(&amp;a);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> i:result) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="string">" "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mrhu.vip/2018/12/30/燃煤计量管理系统/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cheng Hu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chan's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/30/燃煤计量管理系统/" itemprop="url">燃煤计量管理系统</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-30T13:42:11+08:00">
                2018-12-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Software-Engineering/" itemprop="url" rel="index">
                    <span itemprop="name">Software Engineering</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="燃煤计量管理系统"><a href="#燃煤计量管理系统" class="headerlink" title="燃煤计量管理系统"></a>燃煤计量管理系统</h3><h4 id="出入厂客户端"><a href="#出入厂客户端" class="headerlink" title="出入厂客户端"></a>出入厂客户端</h4><p>​    1、车牌识别</p>
<h4 id="无人计量客户端"><a href="#无人计量客户端" class="headerlink" title="无人计量客户端"></a>无人计量客户端</h4><p>​    1、单个地磅处理双向来车流程</p>
<p>​    2、车牌识别与读卡器读卡，判断信息一致性</p>
<h4 id="采样客户端"><a href="#采样客户端" class="headerlink" title="采样客户端"></a>采样客户端</h4><p>​    车牌识别和读卡</p>
<h4 id="PDA终端"><a href="#PDA终端" class="headerlink" title="PDA终端"></a>PDA终端</h4><p>​    读卡，计量卸煤情况</p>
<h4 id="管理人员web端"><a href="#管理人员web端" class="headerlink" title="管理人员web端"></a>管理人员web端</h4><p>​    功能：数据汇总、报表</p>
<p>​    主要工作：服务器配置、部署上线</p>
<h4 id="权限管理模块"><a href="#权限管理模块" class="headerlink" title="权限管理模块"></a>权限管理模块</h4><p>1、使用了RBAC（Role-based Access Control），基于角色的访问控制管理。通过分配和取消角色来完成用户权限的授予和取消，从而使动作主体（用户）与资源的行为（权限）分离。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mrhu.vip/2018/12/30/特征工程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cheng Hu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chan's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/30/特征工程/" itemprop="url">特征工程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-30T13:40:38+08:00">
                2018-12-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Recommender-System/" itemprop="url" rel="index">
                    <span itemprop="name">Recommender System</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="特征类型"><a href="#特征类型" class="headerlink" title="特征类型"></a>特征类型</h3><p>​    一般来说，推荐系统中会有离散特征（如性别、位置）和连续特征（如年龄），当我们将特征值转换为输入数据时，就需要对离散特征进行one-hot编码，然后对连续特征保留其原始数值，也可以对连续特征进行离散化。</p>
<p>​    例如：般来说，推荐系统中会有离散特征和连续特征，当我们用逻辑回归这种宽的离散线性模型的时候，我就会遇到一个很大的问题，就是我需要对特征进行分段，这样才能学到连续特征的非线性结构。比如说用户年龄对点击率的影响，它并不是线性上升的，可能更多的是与年龄段相关，甚至有更复杂的模式，这些是非线性的特性。所以我们可以用机器对连续的特征做自动搜索分段，这样的预处理效率就大大提高了。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mrhu.vip/2018/12/30/音乐推荐/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cheng Hu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chan's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/30/音乐推荐/" itemprop="url">音乐推荐</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-30T13:40:30+08:00">
                2018-12-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Recommender-System/" itemprop="url" rel="index">
                    <span itemprop="name">Recommender System</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="关于音乐推荐："><a href="#关于音乐推荐：" class="headerlink" title="关于音乐推荐："></a>关于音乐推荐：</h3><p>1、基于Music Play Sequence（在购物中就是基于basket）：Cheng, Zhiyong, et al. “Exploiting Music Play Sequence for Music Recommendation.” Twenty-Sixth International Joint Conference on Artificial Intelligence 2017:3654-3660. 使用最基本的MF(Matrix Factorixation) 结合 Song2vec Music Similarity，即通过word2vec的思想，将playlist看作context中的sentence，使用SDNS(the skip-gram negative sampling)的采样方法来学习歌曲中间的相似度，最后在MF（x{ij}-p_u q_i）的基础上加上(s{i,j}-q_i^{T}q_j)^2，最后minimize损失函数，训练得到user和item的embedding表示。</p>
<p>2、基于Playlist：Chua, Tat Seng, et al. “Embedding Factorization Models for Jointly Recommending Items and User Generated Lists.” International ACM SIGIR Conference on Research and Development in Information Retrieval ACM, 2017:585-594. 提出embdding factorization models，使用user-item interaction（user-item-list），item-item interaction（item-item-list）两种关系矩阵，其中list作为side-information。使用sentence to vector的方法，对playlist进行向量化，即考虑某首music的上下相关music集以及其所在的playlist，主要包括words in the context of a sentence 和 words and a sentence in the context of a word。最后提出了两个模型，第一个为EFM-Side：主要包括\sigma(\hat x_{uij})，\sigma(\hat m_{ijt})，第一个表示user-item，第二个表示item-item；第二个位EFM-Joint：模型主要包含三个部分\sigma(\hat x_{uij})，\sigma(\hat y_{uij})，\sigma(\hat r_{ijt})。第一个表示user-item，第二个表示user-list，第三个表示item-item-list的关系。最后可以达到个性化推荐，由于歌曲所属playlist也参与其中，在new music进入时，通过其归属的playlist可以进行很好的推荐，从而有效解决cold start；而且可以提供item和list两种推荐模式。</p>
<p>3、基于user-song interaction：这种类型的模型主要是使用协同过滤（collaborative filtering）。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mrhu.vip/2018/12/30/POI推荐/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cheng Hu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chan's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/30/POI推荐/" itemprop="url">POI推荐</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-30T13:39:56+08:00">
                2018-12-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Recommender-System/" itemprop="url" rel="index">
                    <span itemprop="name">Recommender System</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在当前基于位置的社交网络中，POI（Point of Interest）推荐是一个很重要的主题，其与地理位置、时间等都存在着很强的关系，目前以及有大量的论文基于地理位置来做POI推荐。</p>
<p>1、Griesner, Jean Benoit, T. Abdessalem, and H. Naacke. “POI Recommendation:Towards Fused Matrix Factorization with Geographical and Temporal Influences.” <em>ACM Conference on Recommender Systems</em>ACM, 2015:301-304. 该论文将MF融合地理位置与时间信息来进行POI推荐。论文首先阐述来WMF在隐式反馈上的合理性，然后引用目前已有的结合地理位置信息的方法：geographical matrix factorization (GeoMF) ，该方法假设每一个POI的影响服从正态分布，而且只依赖于空间中的位置距离，如下图1。但是现实生活中的POI并非如此，时间因素也是一个重要的影响因素，因此作者提出对POI的影响结构进行修改，加入时间，通过计算每个用户在POI i转向区域内其他POI j所花的时间，来对POI的影响进行调整，如下图2。</p>
<p>GeoMF:</p>
<p><img src="/2018/12/30/POI推荐/geomf.png" alt=""></p>
<p>GeoMF with Temporal influence:</p>
<p><img src="/2018/12/30/POI推荐/geomf_time.png" alt=""></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mrhu.vip/2018/12/30/CTR预估/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cheng Hu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chan's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/30/CTR预估/" itemprop="url">CTR预估</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-30T13:39:49+08:00">
                2018-12-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Recommender-System/" itemprop="url" rel="index">
                    <span itemprop="name">Recommender System</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>“CTR”是互联网公司进行流量分配的核心依据之一。目前CTR预估方法预演的核心思路是：“通过建立模型来进行组合特征的挖掘”。CTR预估中特征选择是一个很关键的问题，传统机器学习方法只能获取到低阶特征，深度学习模型能很好的提取高阶特征，但是往往会忽略低阶特征的影响。</p>
<p>具体来说有两条推演路线：1、从FM开始推演其在深度学习上的各种推广 (考虑领域的FM、DCN、FNN、DeepFM、NFM、PNN等)；2、从embedding+MLP自身的演进特点结合CTR预估本身的业务场景进行推演 (embedding+MLP、Deep Cross、Wide&amp;Deep、DIN等)；</p>
<p>CTR预估的场景主要是对离散且有具备领域的特征进行学习（特征组合挖掘），所以在深度网络结构上与CNN和RNN不同。</p>
<h3 id="CTR基于传统机器学习算法"><a href="#CTR基于传统机器学习算法" class="headerlink" title="CTR基于传统机器学习算法"></a>CTR基于传统机器学习算法</h3><p>1、linear model、Factorization Machine</p>
<p>2、tree-base model（Xinran He, Junfeng Pan, Ou Jin, Tianbing Xu, Bo Liu, Tao Xu, Yanxin Shi, Antoine Atallah, Ralf Herbrich, Stuart Bowers, and Joaquin Quin ̃onero Candela. Practical lessons from predicting clicks on ads at facebook. In ADKDD, pages 5:1–5:9, 2014. ）</p>
<p>3、tensor based model（Steffen Rendle and Lars Schmidt-Thieme. Pairwise interaction tensor factor- ization for personalized tag recommendation. In WSDM, pages 81–90, 2010. ）</p>
<p>4、support vector machine（Yin-Wen Chang, Cho-Jui Hsieh, Kai- Wei Chang, Michael Ringgaard, and Chih-Jen Lin. Train- ing and testing low-degree polynomial data mappings via linear SVM. JMLR, 11:1471–1490, 2010. ）</p>
<p>5、bayesian model（Thore Graepel, Joaquin Quin ̃onero Candela, Thomas Borchert, and Ralf Herbrich. Web- scale bayesian click-through rate prediction for sponsored search advertising in microsoft’s bing search engine. In ICML, pages 13–20, 2010. ）</p>
<h3 id="CTR基于深度学习算法"><a href="#CTR基于深度学习算法" class="headerlink" title="CTR基于深度学习算法"></a>CTR基于深度学习算法</h3><p>1、FNN（Factorization Machine supported Neural Network；Weinan Zhang, Tianming Du, and Jun Wang. Deep learning over multi-field categorical data - - A case study on user response prediction. In ECIR, 2016. </p>
<p>采用FM预训练得到的隐藏层及其权重作为神经网络的第一层初始值，其可以理解成一种特殊的embedding+MLP</p>
<p><img src="/2018/12/30/CTR预估/fnn.jpg" alt=""></p>
<p>2、PNN（Yanru Qu, Han Cai, Kan Ren, Weinan Zhang, Yong Yu, Ying Wen, and Jun Wang. Product- based neural networks for user response prediction. CoRR, abs/1611.00144, 2016. ）</p>
<p><img src="/2018/12/30/CTR预估/pnn.jpg" alt=""></p>
<p>3、Wide&amp;Deep（Heng-Tze Cheng, Levent Koc, Jeremiah Harmsen, Tal Shaked, Tushar Chandra, Hrishi Aradhye, Glen Anderson, Greg Corrado, Wei Chai, Mustafa Ispir, Rohan Anil, Zakaria Haque, Lichan Hong, Vihan Jain, Xiaobing Liu, and Hemal Shah. Wide &amp; deep learning for recommender systems. CoRR, abs/1606.07792, 2016. ）</p>
<p><img src="/2018/12/30/CTR预估/widedeep.jpg" alt=""></p>
<p>4、Deep Cross：DCN由其残差网络思想进化（Ying Shan, T Ryan Hoens, Jian Jiao, Haijing Wang, Dong Yu, and JC Mao. 2016. Deep Crossing: Web-Scale Modeling without Manually Cra ed Combinatorial Features. In Proceedings of the 22nd ACM SIGKDD International Conference on Knowledge Discovery and Data Mining. ACM, 255–262，2016）</p>
<p><img src="/2018/12/30/CTR预估/deepcross.jpg" alt=""></p>
<p>5、NFM（Xiangnan He and Tat-Seng Chua. Neural Factorization Machines for Sparse Predictive Analytics SIGIR. 355–364. 2017.）</p>
<p><img src="/2018/12/30/CTR预估/nfm.jpg" alt=""></p>
<p>6、AFM（J. Xiao, H. Ye, X. He, H. Zhang, F. Wu, and T.-S. Chua. Attentional factorization machines: Learning the weight of feature interactions via attention networks. In IJCAI，2017）</p>
<p><img src="/2018/12/30/CTR预估/afm.jpg" alt=""></p>
<p>7、DeepFM（Huifeng Guo, Ruiming Tang, Yunming Ye, Zhenguo Li, and Xiuqiang He. DeepFM: A Factorization-Machine based Neural Network for CTR Prediction. arXiv preprint arXiv:1703.04247，2017）</p>
<p><img src="/2018/12/30/CTR预估/deepfm.jpg" alt=""></p>
<p>8、DCN（Wang, R., Fu, B., Fu, G., Wang, M.: Deep &amp; cross network for ad click predictions. In: Proceedings of the ADKDD 17. pp. 12:1–12:7，2017）</p>
<p><img src="/2018/12/30/CTR预估/dcn.jpg" alt=""></p>
<p><strong>Wide&amp;Deep是DeepFM与DCN的基础框架。DeepFM、DCN与Wide&amp;Deep的Deep部分都是MLP；Wide&amp;Deep的Wide部分是logistic regression，可以手动设计特征组合；DeepFM的Wide部分是FM，DCN的Wide部分是cross network，二者均不强求手动设计特征，但此时都与字面意义上的Wide有一定的差异，因为均共享了降维后的嵌入特征</strong></p>
<p><strong>Deep Cross相对于embedding+MLP的改进主要是在MLP部分增加了跳跃连接成为残差网络，其与传统的残差网络的区别主要是没有采用卷机操作，其一个原因是在广告点击率预告领域，特征不具备平移不变性。DCN相对于DeepCross的主要贡献是解耦合了Deep与Cross（特征交叉）部分</strong></p>
<p><strong>部分内容来自于<a href="https://blog.csdn.net/longxinchen_ml/article/details/81031736" target="_blank" rel="noopener">https://blog.csdn.net/longxinchen_ml/article/details/81031736</a></strong> 谢谢分享</p>
<h3 id="DIN：对同领域历史信息引入注意力机制的MLP"><a href="#DIN：对同领域历史信息引入注意力机制的MLP" class="headerlink" title="DIN：对同领域历史信息引入注意力机制的MLP"></a>DIN：对同领域历史信息引入注意力机制的MLP</h3><p>以上神经网络对同领域离散特征的处理基本是将其嵌入后直接求和，这在一般情况下没太大问题。但其实可以做得更加精细。比如对于历史统计类特征。以用户历史浏览的商户id为例，假设用户历史浏览了10个商户，这些商户id的常规处理方法是作为同一个领域的特征嵌入后直接求和得到一个嵌入向量。但这10个商户只有一两个商户与当前被预测的广告所在的商户相似，其他商户关系不大。增加这两个商户在求和过程中的权重，应该能够更好地提高模型的表现力。而增加求和权重的思路就是典型的注意力机制思路</p>
<p>Guorui Zhou, Chengru Song, Xiaoqiang Zhu, Xiao Ma, Yanghui Yan, Xingya Dai, Han Zhu, Junqi Jin, Han Li, and Kun Gai. 2017. Deep Interest Network for Click-Through Rate Prediction. arXiv preprint arXiv:1706.06978 (2017).</p>
<p><img src="/2018/12/30/CTR预估/din.jpg" alt=""></p>
<p><em>AFM也引入了注意力机制，其与FM同领域特征求和之后进行结合，而DIN直接将注意力机制与同领域特征求和之前进行结合</em></p>
<h3 id="多任务视角：信息的迁移与补充"><a href="#多任务视角：信息的迁移与补充" class="headerlink" title="多任务视角：信息的迁移与补充"></a>多任务视角：信息的迁移与补充</h3><p>在大多数场景下，数据越多，训练出来的模型效果会更好。对于电商平台的不同场景的广告位，每个场景蕴含了用户的不同兴趣表示，这些信息的融合与汇总可以带来最后的提升。但是如果将不同场景的数据直接进行合并用来训练（CTR/CVR）模型，结果大多数不太乐观，不同场景下的样本分布存在差异，直接对样本累加会影响分布导致效果负向。</p>
<p>Multi-task learning，多任务学习，不直接对样本进行累加和训练，而是不同场景对应不用的task。底层的embedding受限于单个场景的数据量，很可能学习不充分，通过子任务之间表示学习的共享（shared lookup table）。这样有助于大样本的子任务帮助小样本的子任务，使得底层的表达学习更加充分。</p>
<p><img src="/2018/12/30/CTR预估/mtl_example.jpg" alt=""></p>
<p><strong>DeepFM和DCN也用到了这个思路，只是它们是同一任务的不同模型进行结合，而多任务学习是对不同任务的不同模型进行结合</strong></p>
<h3 id="最新CTR论文"><a href="#最新CTR论文" class="headerlink" title="最新CTR论文"></a>最新CTR论文</h3><p>1、xDeepFM（xDeepFM: Combining Explicit and Implicit Feature Interactions for Recommender Systems，KDD 2018）</p>
<p><img src="/2018/12/30/CTR预估/xdeepfm.png" alt=""></p>
<p>Deep&amp;Cross的进阶：xDeepFM是将CIN与DNN进行模型组合，得到最终的特征输出。其中CIN是以cross network为参照，在构建特征上不是将多领域特征进行concat，而是构建一个matrix（即CrossNetwork中的X0），然后采用cross network中的思想进行特征融合（只是X0不再是一个vector，而是matrix，融合的过程有点像RNN），对于Hidden layer的计算使用类似于CNN的思想，最后的结果采用pooling操作，每一个隐藏层结果进行pooling后concat则可得到最终的特征表示。这就是CIN。而DNN则用最简单的full-connected。</p>
<p>2、ATRank（ATRank: An Attention-Based User Behavior Modeling Framework for Recommendation，AAAI 2018）待读</p>
<p><img src="/2018/12/30/CTR预估/atrank.png" alt=""></p>
<p>2、DIEN（Deep Interest Evolution Network for Click-Through Rate Prediction，AAAI 2019）</p>
<p><img src="/2018/12/30/CTR预估/dien.png" alt=""></p>
<p>该论文是对DIN论文的改进版本，主要解决：</p>
<p>​    1、论文通过用户行为，提取不同step时用户特征；使用GRU；每个序列使用GRU来建模，同时RNN中的每个hidden state用其next item来约束auxiliary loss。（和STAMP/GRU2REC的训练类似，这种方式只是增加了offline的训练成本，对于online inference并没有效率上的影响） </p>
<p>​    2、利用1中each step得到的output state，捕捉用户特征随时间的变化；AUGRU；通过上一步得到each step的output，当作AUGRU的input，同时用target Ad来对所有的hidden state进行attention weight计算，得到的weight当作AUGRU的update gate的权重值，表示当前特征与target Ad的相关度，从而控制GRU的hidden state与最终的结果更相关。 </p>
<p>​    <strong>思考：该模型存在两个loss部分，具体的训练方式怎样？</strong></p>
<p>​        两个loss直接累加，然后对各个参数求偏导数即可。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://mrhu.vip/2018/12/30/《设计模式之禅-第2版-》-学习笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Cheng Hu">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Chan's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/12/30/《设计模式之禅-第2版-》-学习笔记/" itemprop="url">《设计模式之禅(第2版)》-学习笔记</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-12-30T13:36:24+08:00">
                2018-12-30
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Software-Engineering/" itemprop="url" rel="index">
                    <span itemprop="name">Software Engineering</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="六大设计原则"><a href="#六大设计原则" class="headerlink" title="六大设计原则"></a>六大设计原则</h2><h3 id="a、单一职责原则"><a href="#a、单一职责原则" class="headerlink" title="a、单一职责原则"></a>a、单一职责原则</h3><p>Single Responsibility Principle（SRP）：主要讲述“接口”的单一职责，我们一直想要实现的都是“类”的单一职责。但是类本属于实体的抽象，好的抽象结合单一职责，一般会导致类过多。</p>
<h3 id="b、里氏替换原则"><a href="#b、里氏替换原则" class="headerlink" title="b、里氏替换原则"></a>b、里氏替换原则</h3><p>Liskov Substitution Principle（LSP）：所有引用基类的地方必须能透明地使用其子类的对象。但是反过来未必成立。</p>
<p>该原则主要讨论基类与子类之间的关系，即继承关系。继承可以实现代码共享，提高代码重用，代码的可扩展性，项目的开放性。但是继承是侵入性的，子类必须拥有父类的所有属性和方法，降低代码的灵活性，增强了耦合性（父类的修改要考虑子类的修改）。Java使用extends关键字来实现继承，其采用单一继承的规则；C++则采用了多重继承的规则，一个子类可以继承多个父类。</p>
<p>LSP包含四层含义：</p>
<p>1、子类必须完全实现父类的方法</p>
<p>在类中调用其他类，务必使用父类或接口。例子：士兵使用枪械，而枪械有多种。枪械为一个父类，而具体的手枪，步枪为其具体实现。在士兵类中调用枪械，则调用枪械父类，而具体传入则可以穿手枪对象或者步枪对象，这就是父类可以透明地被子类对象替换。</p>
<p>但是如果为玩具枪，则其不具备杀人的特点，即父类中的这一属性与子类本身不匹配。这就是如果子类不能完整地实现父类的方法，或者父类的某些方法在子类中已经发生“畸变”，则建议断开父子继承关系，采用依赖、聚集、组合等关系代替继承。</p>
<p>2、子类可以有自己的个性</p>
<p>子类可以增加其特有的变量和方法，在调用子类的地方，不能够乡下转型（downcast），即子类出现的地方父类未必就可以出现。</p>
<p>3、覆盖或实现父类的方法时输入参数可以被放大</p>
<p>方法中的输入参数被称为前置条件，所谓前置条件就是你要让我执行，就必须满足我的条件；后置条件就是我执行完了需要反馈，标准是什么。</p>
<p>子类中的方法名与父类的方法名相同，但是传入参数类型不一样，不属于覆写（override），是重载（overload），不在同一个类中，但是也属于重载，因为父类中的方法在子类中都存在。例如：父类参数为HashMap，子类参数为Map，子类的输入参数范围扩大了，调用子类的该方法并传入HashMap，则编译器会选择继承于父类的方法来使用，而且这种情况必须要求子类的输入参数范围扩大。如果子类的输入参数范围缩小，即父类方法参数为Map，子类方法参数为HashMap，再重复上面的操作，此时会调用子类重载的方法……按照作者的意思，这就完蛋了，子类在没有覆写父类方法的前提下，居然调用了子类自己的方法，会引起业务逻辑混乱，即子类为实现类，传递一个实现类就会“歪曲”父类的意图，如上面枪的例子，枪存在杀人的功能，如果一个子类实现了同样的方法，功能确实求人，在参数范围缩小的情况下，传入较小范围的参数，就能导致最终调用子类的方法，从而引发混乱。正常想要调用子类的方法，则子类就需要覆写（重写）该方法，即方法名与参数都要与父类相同，只是功能上不同。</p>
<p>所以子类中方法的前提条件必须与基类中被覆写的方法的前置条件相同或者更宽松。</p>
<p>4、覆写或实现父类的方法时输出结果可以被缩小</p>
<p>即父类的一个方法的返回值是一个类型T，子类相同方法（重载或覆写）的返回值为S，里氏替换原则要求S必须小于等于T，即要么同类，要么S是T的子类。</p>
<p>总结：采用里氏替换原则的目的就是增加程序的健壮性，版本升级时也可以保持非常好的兼容性。即使增加子类，原来的子类还可以继续运行。在实际项目中，每个子类对应不同的业务含义，使用父类作为参数，传递不同的子类完成不同的业务逻辑，非常完美！在项目中，采用里氏替换原则，尽量避免子类的“个性”，一旦子类有“个性”，这个子类和父类的关系就很难调和，把子类当父类用，限制了其个性；子类单独作为一个业务来使用，则会让代码中间的耦合关系变复杂，缺乏类替换的标准。</p>
<h3 id="c、依赖倒置原则"><a href="#c、依赖倒置原则" class="headerlink" title="c、依赖倒置原则"></a>c、依赖倒置原则</h3>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Cheng Hu</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">234</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">30</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Cheng Hu</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        
<div class="busuanzi-count">
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  

  

  

  

</body>
</html>
